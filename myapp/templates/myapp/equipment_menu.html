<!-- templates/myapp/equipment_menu.html -->

{% extends 'base.html' %}

{% block title %}설비관리대장{% endblock %}

{% block content %}
<h2>설비관리대장</h2>
<div>
    <button class="btn" onclick="location.href='{{ create_equipment}}'">생성</button>
    <button class="btn" onclick="location.href='{{ equipment_list_edit_mode}}'">변경</button>
    <button class="btn" onclick="toggleTable()">조회</button>
</div>

<!-- 테이블을 이 페이지에 포함 -->
<div id="equipment-table" style="display: none; margin-top: 20px;">
    <!-- 엑셀로 내보내기 버튼 -->
    <div style="text-align: right; margin-bottom: 10px;">
        <button class="btn" onclick="exportToExcel()">엑셀로 내보내기</button>
    </div>
    <table>
        <thead>
            <tr>
                <th>설비 번호</th>
                <th>설비명</th>
                <th>제조사</th>
                <th>설비 사양</th>
            </tr>
        </thead>
        <tbody>
            {% for equipment in equipments %}
            <tr>
                <td>{{ equipment.equipment_number }}</td>
                <td>{{ equipment.name }}</td>
                <td>{{ equipment.manufacturer }}</td>
                <td>{{ equipment.specs }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">등록된 설비가 없습니다.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>

{% endblock %}

{% block extra_js %}
<script>
function toggleTable() {
    var tableDiv = document.getElementById('equipment-table');
    if (tableDiv.style.display === 'none') {
        tableDiv.style.display = 'block';
    } else {
        tableDiv.style.display = 'none';
    }
}
</script>
{% endblock %}
